import{r as a,j as e,L as y,a as S}from"./react-vendor-B5xUu9wX.js";const j=[{title:"Sunset Sound Meditation - Desert Botanical Garden",description:"Experience an evening of sound, stillness, and connection in nature.",link:"https://www.desertbotanical.org/events/sunset-sound-meditation/",image_url:"https://www.desertbotanical.org/wp-content/uploads/2024/06/sunset-sound.jpg"},{title:"Mindful Living in Colorado Springs",description:"Discover yoga and mindfulness classes promoting recovery and wellness.",link:"https://coloradospringsmindfulness.org/",image_url:"https://images.unsplash.com/photo-1506126613408-eca07ce68773"}],b=()=>{const[i,l]=a.useState([]),[n,g]=a.useState(!0),[m,p]=a.useState(""),[x,c]=a.useState(""),[w,o]=a.useState("");a.useEffect(()=>{(async()=>{try{const t=await fetch("/data/news.json",{cache:"no-store"});if(t.ok){const r=await t.json(),h=Array.isArray(r)?r:Array.isArray(r.results)?r.results:[];if(h.length){l(h);return}}l(j)}catch(t){console.error("Error loading news:",t),l(j),p("We couldn’t load news from the network. Showing a local sample.")}finally{g(!1)}})()},[]);const d=s=>{const t=String(s||"").split(/\s+/).filter(Boolean).length;return`${Math.max(1,Math.round(t/200))} min read`},u=(s,t="")=>{try{const r=new URL(String(s||""));if(r.hostname.includes("news.google.")){const h=r.searchParams.get("url")||r.searchParams.get("u");return h?new URL(h).hostname.replace(/^www\./,""):t||""}return r.hostname.replace(/^www\./,"")}catch{return t||""}},f=s=>{const t=String(s||"");return t?t.startsWith("http://")||t.startsWith("https://")?`/api/image?url=${encodeURIComponent(t)}`:t:""},v=async s=>{try{c(s),o("");const r=await(await fetch(`/api/news?url=${encodeURIComponent(s)}`)).text();o(r||"")}catch(t){console.error("Article load failed",t),o("<p style='opacity:0.8'>Unable to load article at this time.</p>")}};return n?e.jsxs("div",{className:"newsfeed-container",children:[e.jsx("h2",{className:"newsfeed-title",children:"Top Stories"}),e.jsx("p",{style:{textAlign:"center",opacity:.8},children:"Loading…"})]}):x?e.jsxs("div",{className:"newsfeed-container",children:[e.jsx("button",{className:"news-link",onClick:()=>{c(""),o("")},children:"← Back to News"}),e.jsx("div",{className:"article-content",dangerouslySetInnerHTML:{__html:w}})]}):e.jsxs("div",{className:"newsfeed-container",children:[e.jsx("div",{className:"news-sound-picker",children:e.jsxs("select",{className:"news-sound-select",defaultValue:"NTS Ambient","aria-label":"Select soundscape",children:[e.jsx("option",{children:"NTS Ambient"}),e.jsx("option",{children:"Lo-Fi Calm"}),e.jsx("option",{children:"Ocean Breath"}),e.jsx("option",{children:"Guided Silence"})]})}),e.jsx("h2",{className:"newsfeed-title heading-rich",children:"Top Stories"}),m?e.jsx("p",{style:{textAlign:"center",opacity:.85},children:m}):null,e.jsx("div",{className:"news-grid",children:i.map((s,t)=>{const r=s.image_url?f(s.image_url):"/assets/default-thumbnail.png";return e.jsxs("div",{className:"news-card",onClick:()=>v(s.link),children:[e.jsx("div",{className:"news-img-wrap",children:e.jsx("img",{src:r,loading:"lazy",alt:s.title||"News image",className:"news-img"})}),e.jsxs("div",{className:"news-meta",children:[e.jsx("p",{className:"news-author",children:s.creator?.[0]||u(s.link,s.source||"")||"Source"}),e.jsxs("p",{className:"news-date",children:[s.pubDate?new Date(s.pubDate).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"","• ",d(s.description)]})]}),e.jsx("h3",{className:"news-headline heading-rich",children:s.title}),e.jsxs("p",{className:"news-desc",children:[(s.description||"").slice(0,150),"…"]}),e.jsx("span",{className:"read-inline",children:"Read Article →"})]},t)})})]})},$=Object.freeze(Object.defineProperty({__proto__:null,default:b},Symbol.toStringTag,{value:"Module"})),k="undefined/__/functions",N=i=>`${k}/${i}`,L=()=>{const{search:i}=S();return a.useMemo(()=>new URLSearchParams(i),[i])},_=()=>{const l=L().get("u")||"",[n,g]=a.useState(null),[m,p]=a.useState(!0),[x,c]=a.useState("");if(a.useEffect(()=>{if(!l){c("Missing article url"),p(!1);return}(async()=>{try{const d=`${N("articleRead")}?u=${encodeURIComponent(l)}`,u=await fetch(d);if(!u.ok)throw new Error(`HTTP ${u.status}`);const f=await u.json();g(f)}catch(d){console.error("reader fetch failed",d),c("Unable to load article")}finally{p(!1)}})()},[l]),m)return e.jsx("div",{className:"px-6 md:px-12 py-10 text-gray-400",children:"Loading article…"});if(x)return e.jsxs("div",{className:"px-6 md:px-12 py-10 text-red-300",children:[e.jsx("p",{className:"mb-3",children:x}),l?e.jsx("a",{href:l,target:"_blank",rel:"noopener noreferrer",title:"Open at source","aria-label":"Open at source",className:"inline-flex items-center gap-2 text-emerald-300 hover:text-emerald-200",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[e.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),e.jsx("path",{d:"m15 3 6 6"}),e.jsx("path",{d:"M21 3h-6v6"})]})}):null]});const w=n?.title||"Untitled",o=n?.siteName?` — ${n.siteName}`:"";return e.jsxs("div",{className:"px-6 md:px-12 py-10",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between gap-4",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-semibold text-emerald-100",children:[w,e.jsx("span",{className:"opacity-60 text-sm md:text-base",children:o})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[n?.url?e.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",title:"Open at source","aria-label":"Open at source",className:"inline-flex items-center text-emerald-300 hover:text-emerald-200",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[e.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),e.jsx("path",{d:"m15 3 6 6"}),e.jsx("path",{d:"M21 3h-6v6"})]})}):null,e.jsx(y,{to:"/news",className:"text-sm text-emerald-300 underline",children:"Back to News"})]})]}),n?.image?e.jsx("div",{className:"rounded-xl overflow-hidden mb-6",children:e.jsx("img",{src:`${N("imgProxy")}?u=${encodeURIComponent(n.image)}`,alt:"",className:"w-full h-auto"})}):null,e.jsx("article",{className:"prose prose-invert max-w-none",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:n?.content||""}})}),n?.url?e.jsxs("div",{className:"mt-8 text-sm text-gray-400",children:["Source: ",e.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"underline",children:n.siteName||n.url})]}):null]})},T=Object.freeze(Object.defineProperty({__proto__:null,default:_},Symbol.toStringTag,{value:"Module"}));export{T as A,$ as N,j as s};
